<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="stecagrid"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<thing-type id="stecagrid_inverter">
		<label>StecaGrid Inverter</label>
		<description>This thing represents a StecaGrid inverter. The provided channels are based upon the fields available in
			the 3611 model. Availability of the data might depend on the model and the physical installation details of the
			device.</description>

        <channel-groups>
            <channel-group id="inverter" typeId="inverterGroup"/>
            <channel-group id="grid" typeId="gridGroup"/>
            <channel-group id="yield" typeId="yieldGroup"/>
        </channel-groups>

        <properties>
            <property name="deviceName">N/A</property>
            <property name="deviceType">N/A</property>
            <property name="deviceNominalPower">N/A</property>
        </properties>

		<config-description>
			<parameter name="ipAddress" type="text" required="true">
				<label>Network Address</label>
				<description>The IP or host name of the inverter.</description>
				<context>network-address</context>
			</parameter>
			<parameter name="refreshDelay" type="integer" min="1">
				<label>Refresh Interval</label>
				<description>The refresh interval in seconds for polling the inverter.</description>
				<default>5</default>
			</parameter>
		</config-description>
	</thing-type>

    <channel-group-type id="inverterGroup">
        <label>Inverter Data</label>
        <description>Current measurements from the inverter</description>
        <channels>
            <channel id="ac_voltage" typeId="ac_voltage"/>
            <channel id="ac_current" typeId="ac_current"/>
            <channel id="ac_power" typeId="ac_power"/>
            <channel id="ac_power_fast" typeId="ac_power_fast"/>
            <channel id="ac_frequency" typeId="ac_frequency"/>
            <channel id="dc_voltage" typeId="dc_voltage"/>
            <channel id="dc_current" typeId="dc_current"/>
            <channel id="link_voltage" typeId="link_voltage"/>
            <channel id="derating" typeId="derating"/>
        </channels>
    </channel-group-type>

    <channel-group-type id="gridGroup">
        <label>Grid</label>
        <description>Grid Statistics</description>
        <channels>
            <channel id="grid_power" typeId="grid_power"/>
            <channel id="grid_consumed_power" typeId="grid_consumed_power"/>
            <channel id="grid_injected_power" typeId="grid_injected_power"/>
            <channel id="own_consumed_power" typeId="own_consumed_power"/>
        </channels>
    </channel-group-type>

    <channel-group-type id="yieldGroup">
        <label>Yield</label>
        <description>Yield Statistics</description>
        <channels>
            <channel id="yield_day_current" typeId="yield_day_current"/>
            <channel id="yield_day_previous" typeId="yield_day_previous"/>
            <channel id="yield_month_current" typeId="yield_month_current"/>
            <channel id="yield_month_previous" typeId="yield_month_previous"/>
            <channel id="yield_year_current" typeId="yield_year_current"/>
            <channel id="yield_year_previous" typeId="yield_year_previous"/>
        </channels>
    </channel-group-type>

	<channel-type id="ac_voltage">
		<item-type>Number:ElectricPotential</item-type>
		<label>AC Voltage</label>
		<description>This channel provides the current AC Voltage in V.</description>
	</channel-type>

    <channel-type id="ac_current">
        <item-type>Number:ElectricCurrent</item-type>
        <label>AC Current</label>
        <description>This channel currently provides the current AC Current in A.</description>
    </channel-type>

    <channel-type id="ac_power">
        <item-type>Number:Power</item-type>
        <label>AC Power</label>
        <description>This channel provides the current AC Power in W.</description>
    </channel-type>

    <channel-type id="ac_power_fast">
        <item-type>Number:Power</item-type>
        <label>AC Power Fast</label>
        <description>This channel provides the current AC Power Fast in W.</description>
    </channel-type>

    <channel-type id="ac_frequency">
        <item-type>Number:Frequency</item-type>
        <label>AC Frequency</label>
        <description>This channel provides the current AC Frequency in Hz.</description>
    </channel-type>

    <channel-type id="dc_voltage">
        <item-type>Number:ElectricPotential</item-type>
        <label>DC Voltage</label>
        <description>This channel provides the current DC Voltage in V.</description>
    </channel-type>

    <channel-type id="dc_current">
        <item-type>Number:Power</item-type>
        <label>DC Current</label>
        <description>This channel provides the current DC Current in A.</description>
    </channel-type>

    <channel-type id="link_voltage">
        <item-type>Number:ElectricPotential</item-type>
        <label>Link Voltage</label>
        <description>This channel provides the current Link Voltage in V.</description>
    </channel-type>

    <channel-type id="yield_day_current">
        <item-type>Number:Energy</item-type>
        <label>Yield Today</label>
        <description>This channel provides the current yield for the current day in KWh.</description>
    </channel-type>

    <channel-type id="yield_day_previous">
        <item-type>Number:Energy</item-type>
        <label>Yield Yesterday</label>
        <description>This channel provides yesterdays total yield in KWh.</description>
    </channel-type>

    <channel-type id="yield_month_current">
        <item-type>Number:Energy</item-type>
        <label>Yield This Month</label>
        <description>This channel provides the current yield for the current month in KWh. Regardless of settings, this value
            will only be updated once per hour.</description>
    </channel-type>

    <channel-type id="yield_month_previous">
        <item-type>Number:Energy</item-type>
        <label>Yield Last Month</label>
        <description>This channel provides last months total yield in KWh.</description>
    </channel-type>

    <channel-type id="yield_year_current">
        <item-type>Number:Energy</item-type>
        <label>Yield This Year</label>
        <description>This channel provides the current yield for the current year in KWh. Regardless of settings, this value
            will only be updated once per hour.</description>
    </channel-type>

    <channel-type id="yield_year_previous">
        <item-type>Number:Energy</item-type>
        <label>Yield Last Year</label>
        <description>This channel provides last years total yield in KWh.</description>
    </channel-type>
    
    <channel-type id="grid_power">
        <item-type>Number:Power</item-type>
        <label>Grid Power</label>
        <description>This channel provides the Grid Power.</description>
    </channel-type>

    <channel-type id="grid_consumed_power">
        <item-type>Number:Power</item-type>
        <label>Grid Consumed Power</label>
        <description>This channel provides the Grid Consumed Power.</description>
    </channel-type>

    <channel-type id="grid_injected_power">
        <item-type>Number:Power</item-type>
        <label>Grid Injected Power</label>
        <description>This channel provides the Grid Injected Power.</description>
    </channel-type>

    <channel-type id="own_consumed_power">
        <item-type>Number:Power</item-type>
        <label>Own Consumed Power</label>
        <description>This channel provides the Own Consumed Power.</description>
    </channel-type>
    
    <channel-type id="derating">
        <item-type>Number</item-type>
        <label>Derating</label>
        <description>This channel provides the current derating as a percentage, where 0 means fully derated and 100 means not
            derated.</description>
    </channel-type>
    

</thing:thing-descriptions>
